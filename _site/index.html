<!DOCTYPE html>
<head>
  <title>TRUSTEDSearch Developers</title>
  <meta charset='utf-8'/>
  <meta name='description' content='Documentation website'/>
  <meta name='viewport' content='width=device-width, initial-scale=1, maximum-scale=1'/>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'/>
  <link href='assets.css' rel='stylesheet' type='text/css'>
</head>
<body>  
  <nav id='sidebar'>
	<h1>TRUSTEDSearch Developers</h1>
<ul id='links'>
  
    
    <li><a href='#/response-status-codes'>Response status codes</a></li>
    
  
    
    <li><a href='#/authentication'>Authenticate</a></li>
    
  
    
  
    
  
    
  
    
  
  
  <li><h2>stuff</h2>
    <ul>
    
              
        <li class=''><a href='#'></a></li>
      
    
              
        <li class='PUT'><a href='#/put-a-thing'>Update a thing</a></li>
              
        <li class='DELETE'><a href='#/delete-a-thing'>Delete a thing</a></li>
      
    
    </ul>
  </li>

  <li><h2>v1</h2>
    <ul>
    
              
        <li class=''><a href='#'></a></li>
      
    
              
        <li class='PUT'><a href='#/creating-a-user'>Creating a User</a></li>
              
        <li class='GET'><a href='#/get-business-updates'>Get Business Updates</a></li>
      
    
    </ul>
  </li>

</ul>
</nav>

<section id='content'>

  <article class=''>
    <a name='/response-status-codes' href='#/response-status-codes'><h2>Response status codes</h2></a>
    <section class='body'>
      <h3 id='success'>Success</h3>

<p>Successes differ from errors in that their body may not be a simple response object with a code and a message. The headers however are consistent across all calls:</p>

<ul>
<li><code>GET</code>, <code>PUT</code>, <code>DELETE</code> returns <code>200 OK</code> on success,</li>

<li><code>POST </code> returns 201 on success,</li>
</ul>

<p>When <a href='#get-stuff'>retrieving stuff</a> for example:</p>

<p><code>Status: 200 OK</code> <code>{
    {
        id: thing_1,
        name: &#39;My first thing&#39;
    },
    {
        id: thing_2,
        name: &#39;My second thing&#39;
    }
}</code></p>

<h3 id='error'>Error</h3>

<p>Error responses are simply returning <a href='http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html'>standard HTTP error codes</a> along with some additional information:</p>

<ul>
<li>The error code is sent back as a status header,</li>

<li>The body includes an object describing both the code and message (for debugging and/or display purposes),</li>
</ul>

<p>For a call with an invalid authentication token for example:</p>

<p><code>Status: 401 Access denied</code> <code>{
    code: 401,
    message: &#39;Access denied: invalid authentication token.&#39;
}</code></p>

<h3 id='error_codes'>Error Codes</h3>

<ul>
<li>400 indicates a general error in the request</li>

<li>401 indicates an authentication error</li>
</ul>
    </section>
  </article>

  <article class=''>
    <a name='/authentication' href='#/authentication'><h2>Authenticate</h2></a>
    <section class='body'>
      <h3 id='request_signing'>Request Signing</h3>

<p>The API uses HMAC hashing with a public/private key pair to sign all requests.</p>

<p>To sign each request, you will need the following:</p>

<ul>
<li>public_key - assigned during account creation.</li>

<li>private_key - assigned during account creation.</li>

<li>request_uri - Request URI. This does not include the hostname or query string. (e.g. &#8220;/v1/local-business&#8221;)</li>

<li>timestamp - Current epoch timestamp.</li>

<li>content_md5 - Content MD5 hash of the request body. For POST and PUT requests, this will be the value as specified in RFC 1864. For GET requests, this will generally be an empty string.</li>
</ul>

<p>In the programming language of your choice, concatenate the request URI, MD5, and timestamp with no delimiters. Use an HMAC hashing method with the SHA1 algorithm to calculate the (binary) hashed value of the concatenated string, using the private key. After base64-encoding the result, you have a valid signature for the request.</p>

<p><em>php exmample</em> <code>$privateKey = &quot;12345privatekey67890&quot;;
$stringToSign = request_uri . content_md5 . timestamp;
$signature = base64_encode( hash_hmac( &#39;sha1&#39;, $stringToSign, $privateKey, true ) ); =&gt; wnl1AVcJAwHoCm7FK9l13ZuMx8g=
</code></p>

<h4 id='sample_post_data'>Sample Post Data</h4>

<ul>
<li>Public key: 1234567890abcdeffedcba0987654321</li>

<li>Private key: 12345privatekey67890</li>

<li>Request URI: /v1/local-business/47139840-870c-11e2-9e96-0800200c9a66</li>

<li>Epoch timestamp: 1362648813</li>

<li>Content MD5: Q2hlY2sgSW50ZWdyaXR5IQ==</li>
</ul>

<p><strong>POST body</strong></p>

<p><code>{
    business: {
        name: &quot;Joe&#39;s Plumbing&quot;,
        street: &quot;123 Main St&quot;,
        city: &quot;Los Angeles&quot;,
        state: &quot;CA&quot;,
        postalCode: &quot;90008&quot;,
        phoneLocal: &quot;2135559876&quot;
    }
}
</code></p>

<h4 id='request_params'>Request Params</h4>

<p>Once the signature is generated, simply append it to the query string of the request, along with the public key and timestamp from above:</p>

<p><code>
https://[api_endpoint]/v1/local-business?apikey=1234567890abcdeffedcba0987654321&amp;signature=wnl1AVcJAwHoCm7FK9l13ZuMx8g=&amp;timestamp=1362648813
</code></p>

<h3 id='response'>Response</h3>

<p>Sends back a collection of things.</p>

<p><code>{
    id: thing_2,
    name: &#39;My second thing&#39;
}</code></p>

<p>For errors responses, see the <a href='#/response-status-codes'>response status codes documentation</a>.</p>
    </section>
  </article>

  <article class='PUT'>
    <a name='/creating-a-user' href='#/creating-a-user'><h2><code><b>PUT</b> /v1/user</code> Creating a User</h2></a>
    <section class='body'>
      <h2 id='primary_user_for_a_partner_account'>Primary User for a Partner Account</h2>

<p>Upon creation of a partner account, a user is automatically created as the default/primary for that partner. This user has an associated public and private key for API interactions, as well as a username and password for UI-based authentication. All operations initiated by the partner to LML (including the creation of additional users) should use these credentials.</p>

<h3 id='username_and_password_requirements'>Username and Password Requirements</h3>

<h3 id='username_requirements'>Username requirements</h3>

<ul>
<li>are case-insensitive</li>

<li>must be between 3 and 30 characters in length</li>

<li>may contain any letter or numeric digit (a-z, 0-9)</li>
</ul>

<h3 id='password_requirements'>Password requirements</h3>

<ul>
<li>are case-sensitive</li>

<li>must be between 8 and 15 characters in length</li>

<li>must contain at least one character from two of the following groups of characters</li>

<li>lower case letters (a-z)</li>

<li>upper case letters (A-Z)</li>

<li>numbers (0-9)</li>

<li>symbols</li>

<li>spaces are not allowed</li>
</ul>

<h3 id='request'>Request</h3>

<p>Requests should be made with the PUT method to https://api_endpoint/v1/user/username?pwd=password, where username is the username of the user to create, and &#8220;password&#8221; is the SHA1 hash of the raw password. All requests must be <a href='#/authentication'>authenticated</a> using the primary partner user&#8217;s keys.</p>

<p>To create a user with username &#8220;lmluser09&#8221; and password &#8220;password123&#8221;, the following PUT request should be made:</p>

<p>https://api.trustedsearch.org/v1/user/lmluser09?pwd=cbfdac6008f9cab4083784cbd1874f76618d2a97&amp;apikey=1234567890abcdeffedcba0987654321&amp;timestamp=1362648813&amp;signature=wnl1AVcJAwHoCm7FK9l13ZuMx8g=</p>

<h3 id='response'>Response</h3>

<p>Sends back a collection of things.</p>

<p><code>Status: 200 OK</code> <code>{
&quot;user_name&quot;: &quot;lmluser09&quot;,
&quot;public_key&quot;: &quot;3ae061c0ce1683ad766184c7c52c7805&quot;,
&quot;private_key&quot;: &quot;9Ho2spIEW1Ou6lajOap4Oaci&quot;,
&quot;settings&quot;: &quot;&quot;
}</code></p>

<p>For errors responses, see the <a href='#/response-status-codes'>response status codes documentation</a>.</p>
    </section>
  </article>

  <article class='GET'>
    <a name='/get-business-updates' href='#/get-business-updates'><h2><code><b>GET</b> /v1/directory-listings/:uuid</code> Get Business Updates</h2></a>
    <section class='body'>
      <h2 id='polling_for_updates'>Polling for Updates</h2>

<p>At any time, a GET request can be made to retrieve the latest information about a business. Depending on the detail level, this call can include the full business data, the content of each directory listing associated with the account (e.g. data from Google+, Bing Local, etc.), as well as the current fulfillment status.</p>

<h3 id='request'>Request</h3>

<p>As this is a GET request, there is no entity or body associated with the call. All filtering is done in the query string parameters, but at the most basic level, a request to obtain details about a specific business would look like the following. Of course, all requests must be signed and authenticated.</p>

<p><code>https://[api_endpoint]/v1/directory-listings/:uuid</code></p>

<p>There is also a mechanism to request changes since a given point in time. This would be useful if there was a recurring call set up to poll for changes. By recording the timestamp of the previous request, that same timestamp can be used as a &#8220;since&#8221; parameter to indicate that only changes made since that last time should be returned. The since time is exclusive, meaning that any changes made at that second are not included in the response.</p>

<p><code>https://api_endpoint/v1/directory-listings?since=1363385995</code></p>

<p><code>Authentication: bearer TOKEN</code> <code>{
    name: &#39;My new thing&#39;
}</code></p>

<h3 id='response'>Response</h3>

<p>The entity or body of the response will contact a JSON object with details specific to the request.</p>

<p>For a /directory-listings?since=timestamp request, a response might look like:</p>

<p><strong>If succeeds</strong>, returns the created thing.</p>

<p><code>Status: 201 Created</code> <code>{
  &quot;uuid&quot;:&quot;a043c791-72b2-4201-b19e-c6ca19a5108c&quot;,
  &quot;externalId&quot;:&quot;ABC2345&quot;,
  &quot;directories&quot;:{
     &quot;merchantcircle&quot;:{
        &quot;label&quot;:&quot;Merchant Circle&quot;,
        &quot;lastupdate&quot;:1363367153,
        &quot;status&quot;:20,
        &quot;description&quot;:&quot;Submitted and Published&quot;,
     &quot;listingUrl&quot;:&quot;http:\/\/www.merchantcircle.com\/business\/A.AAA.A1.Fast.Guaranteed.Appliance.Service.Scottsdale.AZ.480-991-1188&quot;,
        &quot;duplicateUrl&quot;:null,
        &quot;notes&quot;:[&quot;&quot;]
     },
     &quot;superpages&quot;:{
        &quot;label&quot;:&quot;Superpages&quot;,
        &quot;lastupdate&quot;:1363366882,
        &quot;status&quot;:30,
        &quot;description&quot;:&quot;Submitted and Awaiting Publishing&quot;,
        &quot;listingUrl&quot;:null,
        &quot;duplicateUrl&quot;:null,
        &quot;notes&quot;:[&quot;&quot;]
     }
  }
},
{
  &quot;uuid&quot;:&quot;f4c639dd-6331-46d1-9021-ccc2637e8cae&quot;,
  &quot;externalId&quot;:&quot;DEF12345&quot;,
  &quot;directories&quot;:{
     &quot;yelp&quot;:{
        &quot;label&quot;:&quot;Yelp&quot;,
        &quot;lastupdate&quot;:1363367118,
        &quot;status&quot;:31,
        &quot;description&quot;:&quot;Awaiting Phone Verification&quot;,
        &quot;listingUrl&quot;:null,
        &quot;duplicateUrl&quot;:null,
        &quot;notes&quot;:[&quot;&quot;]
     },
     &quot;yahoolocal&quot;:{
        &quot;label&quot;:&quot;Yahoo Local&quot;,
        &quot;lastupdate&quot;:1363367080,
        &quot;status&quot;:40,
        &quot;description&quot;:&quot;Claimed Listing&quot;,
        &quot;listingUrl&quot;:&quot;http:\/\/local.yahoo.com\/info-20078829-a-aaa-a1-fast-guaranteed-appliance-service-scottsdale&quot;,
        &quot;duplicateUrl&quot;:null,
        &quot;notes&quot;:[&quot;&quot;]
     }
  }
}</code></p>

<p>For a /directory-listings/:uuid request, a response might look like:</p>

<p><code>{
  &quot;uuid&quot;:&quot;1c9636cc-d2aa-4ea3-bd00-dd8bde98b520&quot;,
  &quot;externalId&quot;:&quot;ABC1234&quot;,
  &quot;business&quot;:{
     &quot;name&quot;:&quot;Provencal Construction&quot;,
     &quot;street&quot;:&quot;50 Burr Ridge Parkway&quot;,
     &quot;city&quot;:&quot;Burr Ridge&quot;,
     &quot;state&quot;:&quot;IL&quot;,
     &quot;postalCode&quot;:&quot;60527&quot;,
     &quot;phone&quot;:&quot;(630) 323-6768&quot;,
     &quot;website&quot;:{
        &quot;url&quot;:&quot;http:\/\/provencalconstruction.com&quot;,
        &quot;screenshot&quot;:&quot;http:\/\/clients.localsearchoptimization.com\/37b194e7c44f06c3ce61b7f5059d0a31\/screenshot\/baseline\/&quot;
     },
     &quot;slogan&quot;:&quot;There is no substitution for experience.&quot;,
     &quot;descriptionLong&quot;:&quot;Provencal construction is a highly experienced, award winning, owner operated construction firm. Provencal Construction is a general contractor and specializes in custom home design and building, room additions, custom cabinetry, light commercial construction and general construction. Provencal&#39;s offices and showroom is conveniently located in suburban Burr Ridge. The companies main officers are Harry Liesenfelt (president) and Mike Candela (vice president).&quot;,
     &quot;descriptionMedium&quot;:&quot;Provencal construction is a highly experienced, award winning, owner operated construction firm. Provencal Construction is a general contractor and specializes in custom home design.&quot;,
     &quot;descriptionShort&quot;:&quot;Provencal construction is a highly experienced, award winning, owner operated construction firm.&quot;,
     &quot;keywords&quot;:&quot;home builder, general contractor, custom home builder, commercial construction, remodeling, room additions, cabinetry, builder, home designer&quot;,
     &quot;category1&quot;:&quot;Home Builders&quot;,
     &quot;category2&quot;:&quot;Home Improvement &amp; Remodeling Services&quot;,
     &quot;category3&quot;:&quot;Architects &amp; Builders Service&quot;,
     &quot;hoursOfOperation&quot;:&quot;Monday - Saturday 8:00am - 5:00pm&quot;,
     &quot;productsOffered&quot;:&quot;Residential and commercial construction including custom homes, light commercial, remodeling, renovations, design, and all forms of general construction.&quot;,
     &quot;paymentMethods&quot;:[
        &quot;Cash&quot;,
        &quot;Check&quot;,
        &quot;Debit&quot;,
        &quot;MasterCard&quot;,
        &quot;VISA&quot;,
        &quot;Discover&quot;,
        &quot;AmEx&quot;
     ],
     &quot;yearEstablished&quot;:&quot;1956&quot;,
     &quot;numberEmployees&quot;:&quot;varies&quot;,
     &quot;languagesSpoken&quot;:&quot;English&quot;,
     &quot;logoUrl&quot;:&quot;http:\/\/clientimages.localmarketlaunch.com\/101478_51129a78d3e4d_.jpg&quot;,
     &quot;imageUrl&quot;:[
        &quot;http:\/\/clientimages.localmarketlaunch.com\/101478_51129a7abb80c_1.jpg&quot;,
        &quot;http:\/\/clientimages.localmarketlaunch.com\/101478_51129a7b21121_2.jpg&quot;,
        &quot;http:\/\/clientimages.localmarketlaunch.com\/101478_51129a7bafeee_3.jpg&quot;,
        &quot;http:\/\/clientimages.localmarketlaunch.com\/101478_51129a7c55f0b_4.jpg&quot;,
        &quot;http:\/\/clientimages.localmarketlaunch.com\/101478_51129a7ca6bc2_5.jpg&quot;
     ],
     &quot;videoUrl&quot;:&quot;http:\/\/www.youtube.com\/watch?v=_la6watqZLw&quot;,
     &quot;phoneTracking&quot;:[&quot;&quot;],
     &quot;coordinates&quot;:{
        &quot;latitude&quot;:41.7505743,
        &quot;longitude&quot;:-87.9141345
     }
  },
  &quot;searchQueries&quot;:[
     &quot;provencal construction in burr ridge, il&quot;,
     &quot;home builder in burr ridge, il&quot;,
     &quot;general contractor in burr ridge, il&quot;,
     &quot;custom home builder in burr ridge, il&quot;,
     &quot;commercial construction in burr ridge, il&quot;
  ],
  &quot;received&quot;:1360144915,
  &quot;updated&quot;:1363307015,
  &quot;contact&quot;:{
     &quot;firstName&quot;:&quot;Jill&quot;,
     &quot;lastName&quot;:&quot;Merk&quot;,
     &quot;email&quot;:&quot;jill@elevatewebdesigns.com&quot;,
     &quot;phone&quot;:&quot;(702) 480-3277&quot;
  },
  &quot;directories&quot;:{
     &quot;googleplus&quot;:{
        &quot;label&quot;:&quot;Google Plus&quot;,
        &quot;lastupdate&quot;:1360803310,
        &quot;status&quot;:40,
        &quot;description&quot;:&quot;Claimed Listing&quot;,
        &quot;listingUrl&quot;:&quot;https:\/\/plus.google.com\/114128866452346403133\/about?gl=us&amp;hl=en&quot;,
        &quot;notes&quot;:[&quot;&quot;],
        &quot;log&quot;:{
           &quot;1360803310&quot;:&quot;Listing Claimed\/Published&quot;
        },
        &quot;listing&quot;:{
           &quot;foreign_key&quot;:&quot;&quot;,
           &quot;name&quot;:&quot;Provencal Construction&quot;,
           &quot;street&quot;:&quot;50 Burr Ridge Parkway&quot;,
           &quot;city&quot;:&quot;Burr Ridge&quot;,
           &quot;state&quot;:&quot;IL&quot;,
           &quot;postal_code&quot;:&quot;60527&quot;,
           &quot;country&quot;:&quot;&quot;,
           &quot;country_iso_code&quot;:&quot;&quot;,
           &quot;local_phone&quot;:&quot;6302530622&quot;,
           &quot;toll_free_phone&quot;:&quot;&quot;,
           &quot;fax&quot;:&quot;&quot;,
           &quot;website&quot;:&quot;http:\/\/www.provencalconstruction.com\/&quot;,
           &quot;email&quot;:&quot;&quot;,
           &quot;slogan&quot;:&quot;&quot;,
           &quot;long_description&quot;:&quot;&quot;,
           &quot;short_description&quot;:&quot;&quot;,
           &quot;keywords&quot;:[
              &quot;establishment&quot;
           ],
           &quot;payment_methods&quot;:[],
           &quot;year_established&quot;:0,
           &quot;number_of_employees&quot;:0,
           &quot;products_offered&quot;:[],
           &quot;languages_spoken&quot;:[],
           &quot;hours_of_operation&quot;:{
              &quot;mon&quot;:{
                 &quot;open&quot;:true,
                 &quot;openingTime&quot;:&quot;0800&quot;,
                 &quot;closingTime&quot;:&quot;1700&quot;
              },
              &quot;tue&quot;:{
                 &quot;open&quot;:true,
                 &quot;openingTime&quot;:&quot;0800&quot;,
                 &quot;closingTime&quot;:&quot;1700&quot;
              },
              &quot;wed&quot;:{
                 &quot;open&quot;:true,
                 &quot;openingTime&quot;:&quot;0800&quot;,
                 &quot;closingTime&quot;:&quot;1700&quot;
              },
              &quot;thu&quot;:{
                 &quot;open&quot;:true,
                 &quot;openingTime&quot;:&quot;0800&quot;,
                 &quot;closingTime&quot;:&quot;1700&quot;
              },
              &quot;fri&quot;:{
                 &quot;open&quot;:true,
                 &quot;openingTime&quot;:&quot;0800&quot;,
                 &quot;closingTime&quot;:&quot;1700&quot;
              },
              &quot;sat&quot;:{
                 &quot;open&quot;:true,
                 &quot;openingTime&quot;:&quot;0800&quot;,
                 &quot;closingTime&quot;:&quot;1700&quot;
              }
           },
           &quot;logo_url&quot;:&quot;&quot;,
           &quot;square_logo_url&quot;:&quot;&quot;,
           &quot;image_urls&quot;:[],
           &quot;video_urls&quot;:[],
        },
        &quot;verificationMethod&quot;:&quot;phone&quot;
     },...
  }
}
</code></p>

<p>For errors responses, see the <a href='#/response-status-codes'>response status codes documentation</a>.</p>
    </section>
  </article>

  <article class='PUT'>
    <a name='/put-a-thing' href='#/put-a-thing'><h2><code><b>PUT</b> /stuff/:id</code> Update a thing</h2></a>
    <section class='body'>
      <p>This method allows the user to retrieve his stuff.</p>

<h3 id='request'>Request</h3>

<ul>
<li><strong><code>:id</code></strong> is the id the thing to update.</li>

<li>The headers must include a <strong>valid authentication token</strong>.</li>

<li><strong>The body can&#8217;t be empty</strong> and must include at least the name attribute, a <code>string</code> that will be used as the name of the thing.</li>
</ul>

<p><code>Authentication: bearer f862f658-ad89-4fcb-995b-7a4c50554ff6</code> <code>{
    name: &#39;My new thing&#39;
}</code></p>

<h3 id='response'>Response</h3>

<p>Sends back a collection of things.</p>

<p><code>Status: 200 OK</code> <code>{
    {
        id: thing_1,
        name: &#39;My first thing&#39;
    },
    {
        id: thing_2,
        name: &#39;My second thing&#39;
    }
}</code></p>

<p>For errors responses, see the <a href='#response-status-codes'>response status codes documentation</a>.</p>
    </section>
  </article>

  <article class='DELETE'>
    <a name='/delete-a-thing' href='#/delete-a-thing'><h2><code><b>DELETE</b> /stuff/:id</code> Delete a thing</h2></a>
    <section class='body'>
      <p>This method allows the user to post a new thing to his stuff.</p>

<h3 id='request'>Request</h3>

<ul>
<li><strong><code>:id</code></strong> is the id the thing to delete.</li>

<li>The headers must include a <strong>valid authentication token</strong>.</li>

<li><strong>The body is omitted</strong>.</li>
</ul>

<h3 id='response'>Response</h3>

<p>Sends back a collection of things.</p>

<p><code>Status: 200 Deleted</code> <code>{
    code: 200,
    message: &#39;Your thing (id: 736) was deleted&#39;
}</code></p>

<p>For errors responses, see the <a href='#response-status-codes'>response status codes documentation</a>.</p>
    </section>
  </article>

</section>

  
  <!--[if lt IE 9]><script src='http://html5shim.googlecode.com/svn/trunk/html5.js'></script><![endif]-->
  <script src='assets.js' type='text/javascript'></script>
  <script>require('boot');</script>
</body>
</html>