<!DOCTYPE html>
<head>
  <title>TRUSTEDSearch Developers</title>
  <meta charset='utf-8'/>
  <meta name='description' content='Documentation website'/>
  <meta name='viewport' content='width=device-width, initial-scale=1, maximum-scale=1'/>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'/>
  <link href='assets.css' rel='stylesheet' type='text/css'>
</head>
<body>  
  <nav id='sidebar'>
	<h1>TRUSTEDSearch Developers</h1>
<ul id='links'>
  
    
    <li><a href='#/response-status-codes'>Response status codes</a></li>
    
  
    
    <li><a href='#/authentication'>Authenticate</a></li>
    
  
    
  
    
  
    
  
    
  
  
  <li><h2>stuff</h2>
    <ul>
    
              
        <li class=''><a href='#'></a></li>
      
    
              
        <li class='POST'><a href='#/post-a-thing'>Post a thing</a></li>
              
        <li class='PUT'><a href='#/put-a-thing'>Update a thing</a></li>
              
        <li class='DELETE'><a href='#/delete-a-thing'>Delete a thing</a></li>
      
    
    </ul>
  </li>

  <li><h2>v1</h2>
    <ul>
    
              
        <li class=''><a href='#'></a></li>
      
    
              
        <li class='GET'><a href='#/get-stuff'>Creating a User</a></li>
      
    
    </ul>
  </li>

</ul>
</nav>

<section id='content'>

  <article class=''>
    <a name='/response-status-codes' href='#/response-status-codes'><h2>Response status codes</h2></a>
    <section class='body'>
      <h3 id='success'>Success</h3>

<p>Successes differ from errors in that their body may not be a simple response object with a code and a message. The headers however are consistent across all calls:</p>

<ul>
<li><code>GET</code>, <code>PUT</code>, <code>DELETE</code> returns <code>200 OK</code> on success,</li>

<li><code>POST </code> returns 201 on success,</li>
</ul>

<p>When <a href='#get-stuff'>retrieving stuff</a> for example:</p>

<p><code>Status: 200 OK</code> <code>{
    {
        id: thing_1,
        name: &#39;My first thing&#39;
    },
    {
        id: thing_2,
        name: &#39;My second thing&#39;
    }
}</code></p>

<h3 id='error'>Error</h3>

<p>Error responses are simply returning <a href='http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html'>standard HTTP error codes</a> along with some additional information:</p>

<ul>
<li>The error code is sent back as a status header,</li>

<li>The body includes an object describing both the code and message (for debugging and/or display purposes),</li>
</ul>

<p>For a call with an invalid authentication token for example:</p>

<p><code>Status: 401 Access denied</code> <code>{
    code: 401,
    message: &#39;Access denied: invalid authentication token.&#39;
}</code></p>
    </section>
  </article>

  <article class=''>
    <a name='/authentication' href='#/authentication'><h2>Authenticate</h2></a>
    <section class='body'>
      <h3 id='request_signing'>Request Signing</h3>

<p>The API uses HMAC hashing with a public/private key pair to sign all requests.</p>

<p>To sign each request, you will need the following:</p>

<ul>
<li>public_key - assigned during account creation.</li>

<li>private_key - assigned during account creation.</li>

<li>request_uri - Request URI. This does not include the hostname or query string. (e.g. &#8220;/v1/local-business&#8221;)</li>

<li>timestamp - Current epoch timestamp.</li>

<li>content_md5 - Content MD5 hash of the request body. For POST and PUT requests, this will be the value as specified in RFC 1864. For GET requests, this will generally be an empty string.</li>
</ul>

<p>In the programming language of your choice, concatenate the request URI, MD5, and timestamp with no delimiters. Use an HMAC hashing method with the SHA1 algorithm to calculate the (binary) hashed value of the concatenated string, using the private key. After base64-encoding the result, you have a valid signature for the request.</p>

<p><em>php exmample</em> <code>$privateKey = &quot;12345privatekey67890&quot;;
$stringToSign = request_uri . content_md5 . timestamp;
$signature = base64_encode( hash_hmac( &#39;sha1&#39;, $stringToSign, $privateKey, true ) ); =&gt; wnl1AVcJAwHoCm7FK9l13ZuMx8g=
</code></p>

<h4 id='sample_post_data'>Sample Post Data</h4>

<ul>
<li>Public key: 1234567890abcdeffedcba0987654321</li>

<li>Private key: 12345privatekey67890</li>

<li>Request URI: /v1/local-business/47139840-870c-11e2-9e96-0800200c9a66</li>

<li>Epoch timestamp: 1362648813</li>

<li>Content MD5: Q2hlY2sgSW50ZWdyaXR5IQ==</li>
</ul>

<p><strong>POST body</strong></p>

<p><code>{
    business: {
        name: &quot;Joe&#39;s Plumbing&quot;,
        street: &quot;123 Main St&quot;,
        city: &quot;Los Angeles&quot;,
        state: &quot;CA&quot;,
        postalCode: &quot;90008&quot;,
        phoneLocal: &quot;2135559876&quot;
    }
}
</code></p>

<h4 id='request_params'>Request Params</h4>

<p>Once the signature is generated, simply append it to the query string of the request, along with the public key and timestamp from above:</p>

<p><code>
https://[api_endpoint]/v1/local-business?apikey=1234567890abcdeffedcba0987654321&amp;signature=wnl1AVcJAwHoCm7FK9l13ZuMx8g=&amp;timestamp=1362648813
</code></p>

<h3 id='response'>Response</h3>

<p>Sends back a collection of things.</p>

<p><code>{
    id: thing_2,
    name: &#39;My second thing&#39;
}</code></p>

<p>For errors responses, see the <a href='#response-status-codes'>response status codes documentation</a>.</p>
    </section>
  </article>

  <article class='GET'>
    <a name='/get-stuff' href='#/get-stuff'><h2><code><b>GET</b> /v1/user</code> Creating a User</h2></a>
    <section class='body'>
      <h2 id='primary_user_for_a_partner_account'>Primary User for a Partner Account</h2>

<p>Upon creation of a partner account, a user is automatically created as the default/primary for that partner. This user has an associated public and private key for API interactions, as well as a username and password for UI-based authentication. All operations initiated by the partner to LML (including the creation of additional users) should use these credentials.</p>

<h3 id='username_and_password_requirements'>Username and Password Requirements</h3>

<h3 id='username_requirements'>Username requirements</h3>

<ul>
<li>are case-insensitive</li>

<li>must be between 3 and 30 characters in length</li>

<li>may contain any letter or numeric digit (a-z, 0-9)</li>
</ul>

<h3 id='password_requirements'>Password requirements</h3>

<ul>
<li>are case-sensitive</li>

<li>must be between 8 and 15 characters in length</li>

<li>must contain at least one character from two of the following groups of characters</li>

<li>lower case letters (a-z)</li>

<li>upper case letters (A-Z)</li>

<li>numbers (0-9)</li>

<li>symbols</li>

<li>spaces are not allowed</li>
</ul>

<h3 id='request'>Request</h3>

<ul>
<li>The headers must include a <strong>valid authentication token</strong>.</li>
</ul>

<h3 id='response'>Response</h3>

<p>Sends back a collection of things.</p>

<p><code>Status: 200 OK</code> <code>{
    {
        id: thing_1,
        name: &#39;My first thing&#39;
    },
    {
        id: thing_2,
        name: &#39;My second thing&#39;
    }
}</code></p>

<p>For errors responses, see the <a href='#response-status-codes'>response status codes documentation</a>.</p>
    </section>
  </article>

  <article class='POST'>
    <a name='/post-a-thing' href='#/post-a-thing'><h2><code><b>POST</b> /stuff</code> Post a thing</h2></a>
    <section class='body'>
      <p>This method allows users to create a new thing.</p>

<h3 id='request'>Request</h3>

<ul>
<li>The headers must include a <strong>valid authentication token</strong>.</li>

<li><strong>The body can&#8217;t be empty</strong> and must include at least the name attribute, a <code>string</code> that will be used as the name of the thing.</li>
</ul>

<p><code>Authentication: bearer TOKEN</code> <code>{
    name: &#39;My new thing&#39;
}</code></p>

<h3 id='response'>Response</h3>

<p><strong>If succeeds</strong>, returns the created thing.</p>

<p><code>Status: 201 Created</code> <code>{
    id: new_thing,
    name: &#39;My new thing&#39;
}</code></p>

<p>For errors responses, see the <a href='#response-status-codes'>response status codes documentation</a>.</p>
    </section>
  </article>

  <article class='PUT'>
    <a name='/put-a-thing' href='#/put-a-thing'><h2><code><b>PUT</b> /stuff/:id</code> Update a thing</h2></a>
    <section class='body'>
      <p>This method allows the user to retrieve his stuff.</p>

<h3 id='request'>Request</h3>

<ul>
<li><strong><code>:id</code></strong> is the id the thing to update.</li>

<li>The headers must include a <strong>valid authentication token</strong>.</li>

<li><strong>The body can&#8217;t be empty</strong> and must include at least the name attribute, a <code>string</code> that will be used as the name of the thing.</li>
</ul>

<p><code>Authentication: bearer f862f658-ad89-4fcb-995b-7a4c50554ff6</code> <code>{
    name: &#39;My new thing&#39;
}</code></p>

<h3 id='response'>Response</h3>

<p>Sends back a collection of things.</p>

<p><code>Status: 200 OK</code> <code>{
    {
        id: thing_1,
        name: &#39;My first thing&#39;
    },
    {
        id: thing_2,
        name: &#39;My second thing&#39;
    }
}</code></p>

<p>For errors responses, see the <a href='#response-status-codes'>response status codes documentation</a>.</p>
    </section>
  </article>

  <article class='DELETE'>
    <a name='/delete-a-thing' href='#/delete-a-thing'><h2><code><b>DELETE</b> /stuff/:id</code> Delete a thing</h2></a>
    <section class='body'>
      <p>This method allows the user to post a new thing to his stuff.</p>

<h3 id='request'>Request</h3>

<ul>
<li><strong><code>:id</code></strong> is the id the thing to delete.</li>

<li>The headers must include a <strong>valid authentication token</strong>.</li>

<li><strong>The body is omitted</strong>.</li>
</ul>

<h3 id='response'>Response</h3>

<p>Sends back a collection of things.</p>

<p><code>Status: 200 Deleted</code> <code>{
    code: 200,
    message: &#39;Your thing (id: 736) was deleted&#39;
}</code></p>

<p>For errors responses, see the <a href='#response-status-codes'>response status codes documentation</a>.</p>
    </section>
  </article>

</section>

  
  <!--[if lt IE 9]><script src='http://html5shim.googlecode.com/svn/trunk/html5.js'></script><![endif]-->
  <script src='assets.js' type='text/javascript'></script>
  <script>require('boot');</script>
</body>
</html>